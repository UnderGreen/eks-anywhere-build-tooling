From 04afe7026d660e069cd8204f19c2ee95c28d967f Mon Sep 17 00:00:00 2001
From: Prow Bot <prow@amazonaws.com>
Date: Fri, 9 Jun 2023 15:43:20 +0000
Subject: [PATCH] Set cloudinit feature flags for RHEL

---
 images/capi/ansible/roles/providers/tasks/main.yml | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/images/capi/ansible/roles/providers/tasks/main.yml b/images/capi/ansible/roles/providers/tasks/main.yml
index 09eaeca45..f238b423f 100644
--- a/images/capi/ansible/roles/providers/tasks/main.yml
+++ b/images/capi/ansible/roles/providers/tasks/main.yml
@@ -116,6 +116,15 @@
     mode: 0644
   when: ansible_os_family == "Debian"
 
+- name: set cloudinit feature flags for redhat
+  copy:
+    src: usr/lib/python3/dist-packages/cloudinit/feature_overrides.py
+    dest: /usr/lib/python3.6/site-packages/cloudinit/feature_overrides.py
+    owner: root
+    group: root
+    mode: 0644
+  when: ansible_os_family == "RedHat" and ansible_distribution == "RedHat"
+
 - name: Ensure chrony is running
   systemd:
     enabled: yes
-- 
2.25.1

